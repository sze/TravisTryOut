language: objective-c
before_install: gem install cocoapods
script: xctool -workspace TravisTestApp.xcworkspace -scheme TravisTestApp -sdk iphoneos -configuration Release OBJROOT=$PWD/build SYMROOT=$PWD/build ONLY_ACTIVE_ARCH=NO
env:
  global:
  - APP_NAME="TravisTestApp"
  - 'DEVELOPER_NAME="iPhone Distribution: Tailored Media Gmbh (22DEN472RY)"'
  - PROFILE_NAME="Travis_Test_App_inHouse"
before_script:
  - openssl aes-256-cbc -k "justatest" -in scripts/profile/Travis_Test_App_inHouse.mobileprovision.enc -d -a -out scripts/profile/Travis_Test_App_inHouse.mobileprovision
  - openssl aes-256-cbc -k "justatest" -in scripts/certs/dist.cer.enc -d -a -out scripts/certs/dist.cer
  - openssl aes-256-cbc -k "justatest" -in scripts/certs/dist.cer.p12 -d -a -out scripts/certs/dist.p12
  - ./scripts/add-key.sh
after_success:
- ./scripts/sign.sh
after_script:
- ./scripts/clean.sh
